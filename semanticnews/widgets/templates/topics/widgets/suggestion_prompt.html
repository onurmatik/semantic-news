{% load i18n %}
{% comment %}
Reusable prompt area for AI suggestions and manual submissions.
Expected context:
- textarea_id: id for instructions textarea (required)
- textarea_name: optional form name
- label: optional label text
- help_text: optional helper text
- rows: optional textarea rows
- button_id: id for suggestion button (required)
- button_label: button text
- button_loading_label: optional loading text
- manual_button_id: optional id for manual submission button
- manual_button_label: optional manual button text
- topic_uuid/widget_id/section_id/widget_type: optional data attributes consumed by JS helpers
{% endcomment %}
<div
    class="mb-3"
    data-widget-suggestion
    {% if topic_uuid %}data-topic-uuid="{{ topic_uuid }}"{% endif %}
    {% if widget_id %}data-widget-id="{{ widget_id }}"{% endif %}
    {% if section_id %}data-section-id="{{ section_id }}"{% endif %}
    {% if widget_type %}data-widget-type="{{ widget_type }}"{% endif %}
>
    {% if label %}
        <label class="form-label" for="{{ textarea_id }}">{{ label }}</label>
    {% endif %}
    <textarea
        class="form-control"
        id="{{ textarea_id }}"
        {% if textarea_name %}name="{{ textarea_name }}"{% endif %}
        rows="{{ rows|default:3 }}"
        data-widget-suggestion-input
    ></textarea>
    {% if help_text %}
        <div class="form-text">{{ help_text }}</div>
    {% endif %}
    <div class="mt-2">
        <div class="alert alert-info d-none" data-widget-validation role="alert"></div>
        <div class="form-text text-secondary d-none" data-widget-suggestion-message></div>
    </div>
    <div class="d-flex gap-2 mt-2">
        <button
            type="button"
            class="btn btn-outline-primary"
            id="{{ button_id }}"
            {% if button_loading_label %}data-loading-label="{{ button_loading_label }}"{% endif %}
            data-widget-suggestion-trigger
        >
            <i class="bi bi-stars me-1" aria-hidden="true"></i>
            {{ button_label|default:_('Get suggestion') }}
        </button>
        <button
            type="button"
            class="btn btn-outline-secondary"
            {% if manual_button_id %}id="{{ manual_button_id }}"{% endif %}
            data-widget-suggestion-manual
        >
            <i class="bi bi-pencil-square me-1" aria-hidden="true"></i>
            {{ manual_button_label|default:_('Submit manually') }}
        </button>
    </div>
</div>
