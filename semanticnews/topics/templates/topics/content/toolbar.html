{% load i18n %}
{% if edit_mode %}
<div class="my-3" data-content-toolbar data-widget-toolbar>
    {% if widget_catalog %}
        <div class="mb-3" data-toolbar-panels>
            {% for widget in widget_catalog %}
                <template data-widget-panel="{{ widget.key }}">
                    {{ widget.panel_html|safe }}
                </template>
            {% endfor %}
        </div>
    {% endif %}
    <div class="card border-light">
        <div class="card-body py-2">
            <div class="d-flex flex-wrap gap-2" data-toolbar-buttons>
                {% if widget_catalog %}
                    {% for widget in widget_catalog %}
                        <button
                            type="button"
                            class="btn btn-outline-secondary btn-sm"
                            data-toolbar-button="{{ widget.key }}"
                            data-widget-definition-id="{{ widget.id }}"
                            {% if topic.status == 'archived' %}disabled{% endif %}
                        >
                            {{ widget.name }}
                        </button>
                    {% endfor %}
                {% else %}
                    <p class="text-secondary small mb-0">{% trans "No widgets available." %}</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endif %}
