{% load i18n %}
<div class="topic-widget-form" data-widget-form="image">
    <div class="mb-3">
        <label class="form-label" for="widget-image-prompt">{% trans "Image prompt" %}</label>
        <textarea
            id="widget-image-prompt"
            class="form-control"
            name="prompt"
            rows="4"
            placeholder="{% trans 'Describe the image you want to generateâ€¦' %}"
        >{{ content.prompt|default_if_none:'' }}</textarea>
        <div class="form-text text-muted">
            {% blocktrans %}The prompt guides the image generation model and is visible in previews.{% endblocktrans %}
        </div>
    </div>
    <div class="mb-3">
        <label class="form-label" for="widget-image-url">{% trans "Image URL" %}</label>
        <input
            type="url"
            id="widget-image-url"
            class="form-control"
            name="image_url"
            value="{{ content.image_url|default_if_none:'' }}"
            placeholder="https://"
        />
        <div class="form-text text-muted">
            {% blocktrans %}Provide an existing image URL to use in previews or leave blank to generate a new image.{% endblocktrans %}
        </div>
    </div>
    <div class="text-center" data-widget-image-preview>
        {% with image_src=content.image_url %}
            {% if image_src %}
                <img src="{{ image_src }}" alt="" class="img-fluid rounded" />
            {% else %}
                <p class="text-muted mb-0">{% trans "No preview available yet." %}</p>
            {% endif %}
        {% endwith %}
    </div>
</div>
