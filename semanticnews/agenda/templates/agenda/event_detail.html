{% extends "base.html" %}

{% load static i18n humanize markdown_extras %}

{% block title %}{{ event.title }}{% endblock %}


{% block content %}

<div class="container">
    <div class="row">

        <p class="text-muted small mb-0">{{ event.date|date:"M d, Y" }}</p>
        <h1 class="fs-3">{{ event.title }}</h1>
        {% if event.description %}
            <p>{{ event.description }}</p>
        {% endif %}

    <div class="row">
        <div class="col-12 col-md-8">
        </div>

        <div class="col-12 col-md-4">

            <div class="d-flex justify-content-between align-items-center mb-2">
                <h2 class="fs-5 mb-0">{% trans "Related events" %}</h2>
                <button id="suggestEventsBtn" data-event-title="{{ event.title }}" class="btn btn-sm btn-outline-secondary" title="{% trans 'Add events' %}">
                    <i class="bi bi-plus-lg"></i>
                </button>
            </div>

            {% for sim_event in similar_events %}
                {% include "agenda/event_list_item.html" with event=sim_event %}
            {% empty %}
                <p>{% trans "No related events" %}</p>
            {% endfor %}

        </div>
    </div>
</div>

<div class="modal fade" id="suggestEventsModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">{% trans "Add related events" %}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="{% trans 'Close' %}"></button>
            </div>
            <div class="modal-body" id="suggestedEventsList">
                <p>{% trans "Loading suggestions..." %}</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" id="createSelectedEventsBtn">{% trans "Create selected" %}</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">{% trans "Close" %}</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
    {{ block.super }}
    <script src="{% static 'agenda/event_suggestions.js' %}"></script>
{% endblock %}
